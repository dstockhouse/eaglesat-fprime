<?xml version="1.0" encoding="utf-8"?>

<comment>
Namespace Es is short for Eaglesat
</comment>

<component name="AcsMgr" kind="active" namespace="Es" modeler="true">

    <import_port_type>Drv/PhyPort/PhyPortAi.xml</import_port_type>

    <ports>

        <comment>
            Finish here!
        </comment>

        <comment>
        Where everyone else gives their specific state to the OBC manager
        </comment>
        <port name="AcsStatus" data_type="Acs::Status" kind="guarded_input" max_number="1">
        </port>

        <port name="EpsStatus" data_type="Eps::Status" kind="guarded_input" max_number="1">
        </port>

        <port name="GpsStatus" data_type="Gps::Status" kind="guarded_input" max_number="1">
        </port>

        <port name="PcStatus" data_type="Pc::Status" kind="guarded_input" max_number="1">
        </port>

        <comment>
        Where everyone else polls the system state
        </comment>
        <port name="ObcState" data_type="Obc::State" kind="input" max_number="1">
        </port>
    </ports>
    

    <comment>
    </comment>
    

    <commands>
        <command kind="async" opcode ="0" mnemonic="OBC_RESET">
            <comment>
            </comment>
        </command>


        <command kind ="async" opcode="1" mnemonic="OBC_CHANGE_MODE">
            <comment>
            </comment>
            
        </command>
        
        <command kind = "async" opcode="2" mnemonic="CMD_ATTITUDE_ANGLES">
            <comment>
                Commanded attitude angles  ID: 15
                -Data type INT
                -length 6 bytes
                Commanded Roll Angle
                    -Offset 0 bits
                    -length 16 bits
                Commanded Pitch Angle
                    -Offset 16 bits
                    -length 16 bits
                Commanded Yaw Angle
                    -Offset 32 bits
                    -length 16 bits

                Raw Parameter: (raw parameter) = (formatted Value) * 100.0      (formatted value is in [deg] units)
            </comment>
        </command>
        
        
    </commands>

    <telemery>
        <channel id="0" name="EstAttitudeAngle" data_type="S32" abbrev="E000-0000" format_string="Estimated Attitude Angles are \n Roll: %0.3f\n  Pitch: %0.3f\n Yaw: %0.3f">
            <comment>
                Estimated attitude angles
                    -Data type INT
                    -length 6 bytes
                    Estimated Roll Angle
                        -Offset 0 bits
                        -length 16 bits
                    Estimated Pitch Angle
                        -Offset 16 bits
                        -length 16 bits
                    Estimated Yaw Angle
                        -Offset 32 bits
                        -length 16 bits
                        
                Formatted Value: (formatted value)[deg] = RAWVAL*0.01
            </comment>
        </channel>

        <channel id="1" name="CurCOMMState" data_type="U48" abbrev="E000-0001" format_string="Number of telecommands received: %u \n 
                                                                                              Number of telemetry requests received: %u">
            <comment>
                Communtication Status Telemetry
                length 6 bytes
                
                Telecommand counter
                    -Data type: UINT
                    -Offset 0 bits
                    -length 16 bits
                Telemetry request counter
                    -Data type: UINT
                    -Offset 16 bits
                    -length 16 bits
                Telecommand buffer overrun
                -TC buffer was overrun while receiving a telecommand
                    -Offset 32 bits
                    -boolean
                CAN Telecommand buffer error
                -Telecommand sent exceeds buffer size
                    -Offset 37 bits
                    -boolean
                
            </comment>
        </channel>
        
        
    </telemery>
    
    
    
    
</component>

